# Enterprise Task Hub — 講師向けアプリ概要

講師の方にアプリの詳細を簡単に説明するための資料です。

---

## 1. アプリの目的と概要

| 項目 | 内容 |
|------|------|
| **アプリ名** | Enterprise Task Hub（業務管理アプリ） |
| **目的** | 組織内のタスクを、**役割（管理者・リーダー・一般）に応じた権限**で安全に管理する。 |
| **主な機能** | ログイン（認証）、タスクの一覧・作成・詳細・更新・削除。**誰がどのタスクを「見る／編集する／削除する」かはロールで制御**している。 |

---

## 2. 技術スタック・使用言語

| 区分 | 技術 | 使用言語・備考 |
|------|------|----------------|
| **フロントエンド** | Next.js（App Router）, TypeScript, Tailwind CSS | 言語: **TypeScript**。画面は React コンポーネント、ルーティングは App Router。 |
| **バックエンド** | FastAPI, SQLAlchemy, PostgreSQL | 言語: **Python**。API は REST、DB アクセスは SQLAlchemy（ORM）。 |
| **インフラ** | Docker, docker-compose | 開発環境は **docker-compose** で DB とバックエンドを起動。 |

---

## 3. 業務フロー（ユーザーがやること）

```
1. ログイン（メール・パスワード）
   ↓
2. タスク一覧を見る（自分に見えるタスクだけ表示される）
   ↓
3. タスクを新規作成 / 既存タスクの詳細を開く
   ↓
4. 権限に応じて「編集」または「ステータスだけ変更」
   （一般ユーザーは他人のタスクは基本的にステータスのみ更新可）
   ↓
5. 必要に応じて削除（自分が作成したタスクなど、権限がある場合のみ）
```

- **管理者（Admin）**: 全チーム・全タスクを閲覧・編集可能。チームの作成・編集も可能（実装範囲では閲覧中心）。
- **リーダー（Leader）**: 自チーム内のタスクを閲覧・編集。他人のタスクは「閲覧のみ」または「チーム内なら編集可」。
- **一般（User）**: 自分が作ったタスク・自分が担当のタスクを中心に表示。他人のタスクは「閲覧のみ」または「ステータス更新のみ」。

---

## 4. 画面構成・URL

| URL | 画面 | 説明 |
|-----|------|------|
| `/login` | ログイン画面 | メール・パスワードでログイン。成功後はタスク一覧へ。 |
| `/tasks` | タスク一覧 | ロールに応じて表示されるタスクが変わる。 |
| `/tasks/new` | 新規作成 | モーダルまたは別画面でタスクを新規作成。 |
| `/tasks/[id]` | 詳細・編集 | タスクの詳細表示。権限に応じて編集フォームの内容が変わる。 |

---

## 5. 権限の考え方（アプリの「尖り」）

「誰が何をできるか」を **権限マトリクス** で設計している。

| 操作対象 | 管理者（Admin） | リーダー（Leader） | 一般（User） |
|----------|-----------------|---------------------|--------------|
| チーム管理 | 作成・編集 | 閲覧のみ | × |
| 他人のタスク | 閲覧のみ | チーム内のみ編集可 | 閲覧不可 or ステータス更新のみ |
| リーダーから割り当てられたタスク | 閲覧のみ | 全操作可能 | ステータス更新のみ |
| 自分が作ったタスク | 閲覧のみ | 閲覧のみ | **全操作可能** |

- バックエンドで **API ごとに「このユーザーはこの操作をしていいか」を判定** している。
- フロントエンドでは **ロールに応じてボタンやフォームの出し分け** をしている（見せかけだけでなく、API 側でも同じルールで拒否）。

---

## 6. 2週間ごとの報告用：何ができるか・成果物

開発期間を **2週間ごとに区切って報告** する想定です。

### 1〜2週目（10営業日）終了時点でできること・成果物

| 成果物 | 内容 |
|--------|------|
| **環境** | Docker Compose で DB・バックエンドが起動する。 |
| **認証** | ログイン API（メール・パスワード）が動き、JWT が発行される。フロントのログイン画面からログインできる。 |
| **タスク CRUD** | タスクの一覧・作成・詳細・更新・削除の API が動く。フロントから一覧表示・新規作成・詳細・編集・削除まで一通り操作できる。 |
| **認可の土台** | バックエンドで「ログインユーザー以外は API を使えない」状態になっている。 |

**報告のポイント**: 「ログインして、自分のタスクを一覧・作成・編集・削除できるところまでできました。次は『ロール（管理者・リーダー・一般）で見えるタスクと操作できる範囲を変える』実装に入ります。」

---

### 3週目（5営業日）終了時点でできること・成果物

| 成果物 | 内容 |
|--------|------|
| **権限に応じた一覧** | 管理者＝全タスク、リーダー＝自チーム内、一般＝自分関連のタスクのみ表示。 |
| **権限に応じた操作** | 一般ユーザーは他人のタスクは「ステータスのみ更新可」など、権限マトリクスに沿った制限がかかっている。 |
| **フロントの出し分け** | ロールに応じて編集ボタンやフォームの項目を出し分け。未ログイン時はログイン画面へリダイレクト。 |
| **サンプルデータ・README** | チーム・ユーザー・タスクのサンプルデータを投入できる。README に起動方法と権限の考え方を記載。 |

**報告のポイント**: 「ロール（Admin/Leader/User）で見えるタスクと編集できる範囲が変わるようにしました。権限マトリクスをバックエンドの 1 箇所で管理し、API と画面の両方で同じルールが動いています。」

---

## 7. 用語の整理（講師に説明するとき）

| 用語 | 説明 |
|------|------|
| **JWT** | ログイン後に発行するトークン。API を呼ぶときに「このユーザーでログインしている」と伝えるために使う。 |
| **ロール** | 管理者（Admin）・リーダー（Leader）・一般（User）の 3 種類。権限の判定に使う。 |
| **権限マトリクス** | 「どのロールが、どの対象（チーム・他人のタスク・自分のタスク）に、どんな操作（閲覧・編集・削除）ができるか」を表にしたもの。設計の核。 |
| **論理削除** | タスクを「削除」しても DB からは消さず、フラグで「削除済み」とマークする。一覧には出さない。 |

---

この資料をベースに、講師には「技術スタック（Next.js / FastAPI / PostgreSQL / Docker）」「使用言語（TypeScript / Python）」「業務フロー（ログイン→一覧→作成・編集）」「権限の考え方（ロールで見える範囲・操作が変わる）」を簡潔に説明できます。2週間ごとの報告では、上記の「1〜2週目の成果物」「3週目の成果物」をそのまま報告用のサマリとして使えます。
